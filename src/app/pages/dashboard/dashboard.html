<div class="card">
  <p-table
    class="custom-table m-auto"
    [value]="userData$ | async | userSearch : searchTerm"
    [paginator]="true"
    [rows]="rows"
    [totalRecords]="(totalRecords$ | async) || 0"
    [lazy]="true"
    [(first)]="first"
    (onPageChange)="onPageChange($event)"
  >
    <ng-template #caption>
      <div
        class="flex justify-content-between align-items-center mx-auto mb-6 lg:flex-row flex-column gap-5"
      >
        <h1>All users</h1>

        <div class="ml-auto lg:ml-0 button-group">
          <input
            type="text"
            placeholder="Search by name..."
            [(ngModel)]="searchTerm"
            class="input-g w-28rem"
          />
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="header">
      <tr>
        <th>Id</th>
        <th>User Image</th>
        <th>First Name</th>
        <th>Last Name</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-user>
      <tr>
        <td>{{ user.id }}</td>
        <td>
          <img [src]="user.image" alt="avatar" width="40" class="rounded-full" />
        </td>
        <td>{{ user.firstName }}</td>
        <td>{{ user.lastName }}</td>
      </tr>
    </ng-template>

    <ng-template pTemplate="footer">
      <tr class="footer">
        <td colspan="6">
          Showing {{ first + 1 }} to {{ first + rows }} of {{ totalRecords$ | async }} users

          <ul class="btn-p">
            <li>
              <button class="tabel-btn" (click)="goToPrev()" [disabled]="isFirstPage()">
                < Previous
              </button>
            </li>
            <li>
              <button class="tabel-btn" (click)="goToNext()">Next ></button>
            </li>
          </ul>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
